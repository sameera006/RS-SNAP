---
title: "wk3-Corrections"
output: html_document
date: "2024-01-30"
---
##ATMOSPHERIC CORRECTION
CHECKING THE DIGITAL NUMBER

we have taken two imagery for the study area overlapping with each other.

#merging Imagery (LANDSAT 8 & LANDSAT 9)

**LANDSAT 8**

```{r}
library(tidyverse)
library(terra)
library(fs)

# List your raster files excluding band 8 using the patter argument
listlandsat_8<-dir_info(here::here("Data", "week3", "LC08_L2SP_175084_20240115_20240124_02_T1"))%>%
  dplyr::filter(str_detect(path, "[B123456790].TIF")) %>%
  dplyr::select(path)%>%
  pull()%>%
  as.character()%>%
  # Load our raster layers into a stack
  terra::rast()
```

**LANDSAT 9**

```{r}
# List your raster files excluding band 8 using the patter argument
listlandsat_9<-dir_info(here::here("Data", "week3", "LC09_L2SP_175083_20240123_20240124_02_T1"))%>%
  dplyr::filter(str_detect(path, "[1B23456790].TIF")) %>%
  dplyr::select(path)%>%
  pull()%>%
  as.character()%>%
  # Load our raster layers into a stack
  terra::rast()
```

```{r}
m1 <- terra::mosaic(listlandsat_8, listlandsat_9, fun="mean")
```
#Enhancements
Ratioing is the difference between two spectral bands that have a certain spectral response meaning it is easier to identify a certain landscape feature…for example…NDVI

The **Normalised Difference Vegetation Index** is based on the fact that healthy and green vegetation reflects more in the NIR but absorbs in the Red wavelength

```{r}
m1_NDVI <- (m1$LC08_L2SP_175084_20240115_20240124_02_T1_SR_B5 - m1$LC08_L2SP_175084_20240115_20240124_02_T1_SR_B4 ) / (m1$LC08_L2SP_175084_20240115_20240124_02_T1_SR_B5 + m1$LC08_L2SP_175084_20240115_20240124_02_T1_SR_B4)

m1_NDVI %>%
  plot(.)
```
We can reclassify this to pull out certain areas, for example, only where NDVI is equal to or greater than 0.2

```{r}
veg <- m1_NDVI %>%
  # cbind = combine dataframes, or here or values listed
  terra::classify(., cbind(-Inf, 0.2, NA))

veg %>%
  plot(.)
```

#FILTERING
Filtering refers to any kind of moving window operation to our data which can be saved as a separate raster file.

```{r}
# for a 3 by 3 filter on 1 band, w means the window and 3 means a 3 by 3 square.

m1_filter <- terra::focal(m1$LC08_L2SP_175084_20240115_20240124_02_T1_SR_B4, w=3)
```
# TEXTURE






This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
